\begin{comment}
\begin{table}[]
    \centering
    \begin{tabular}{c|c|c}
        Model & Decompression event & Closed box  \\
        Width ($\mathrm{km}$) & 1 & 300 \\
        Height ($\mathrm{km}$) & 120 & 120 \\
         & 
    \end{tabular}
    \caption{Caption}
    \label{tab:decompression_params}
\end{table}
\end{comment}

\subsection{Closed box}

\begin{figure}
    \centering
    \begin{subfigure}{0.49\textwidth}
        \centering
        \includegraphics[width=\textwidth]{figures/box_batch0.png}
        \caption{Caption}
        \label{fig:my_label}
    \end{subfigure}
    \hfill
    \begin{subfigure}{0.49\textwidth}
        \centering
        \includegraphics[width=\textwidth]{figures/box_2pp0.png}
        \caption{Caption}
        \label{fig:my_label}
    \end{subfigure}
    %
    \begin{subfigure}{0.49\textwidth}
        \centering
        \includegraphics[width=\textwidth]{figures/box_batch38.png}
        \caption{Caption}
        \label{fig:my_label}
    \end{subfigure}
    \hfill
    \begin{subfigure}{0.49\textwidth}
        \centering
        \includegraphics[width=\textwidth]{figures/box_2pp38.png}
        \caption{Caption}
        \label{fig:my_label}
    \end{subfigure}
    %
    \begin{subfigure}{0.49\textwidth}
        \centering
        \includegraphics[width=\textwidth]{figures/box_batch79.png}
        \caption{Caption}
        \label{fig:my_label}
    \end{subfigure}
    \hfill
    \begin{subfigure}{0.49\textwidth}
        \centering
        \includegraphics[width=\textwidth]{figures/box_2pp77.png}
        \caption{Caption}
        \label{fig:my_label}
    \end{subfigure}
\end{figure}
\subsection{Decompression event}

\begin{figure}
    \centering
    \input{figures/decompression_batch.pgf}
    \caption{}
    \label{fig:decompression_batch}
\end{figure}

\begin{figure}
    \centering
    \input{figures/decompression_frac.pgf}
    \caption{Caption}
    \label{fig:decompression_frac}
\end{figure}

\begin{figure}
    \centering
    \input{figures/decompression_2pp.pgf}
    \caption{Caption}
    \label{fig:decompression_2pp}
\end{figure}

\subsection{Performance analysis}

\begin{figure}
    \centering
    \begin{subfigure}{0.49\columnwidth}
        \centering
        \begin{tikzpicture}
            \pie[hide number, radius=1.3, rotate=45, text=legend] {
                83/ \footnotesize{Update particle properties},
                5.2/ \footnotesize{Assemble temperature system},
                2.8/ \footnotesize{Assemble Stokes system},
                2.3/ \footnotesize{Postprocessing},
                6.7/ \footnotesize{Other}
            }
        \end{tikzpicture}
        \caption{A breakdown of the runtime for the particle property plugin.}
        \label{fig:perf_batch_pie}
    \end{subfigure}
    \hfill
    \begin{subfigure}{0.49\columnwidth}
        \centering
        \begin{tikzpicture}
            \pie[hide number, radius=1.3, rotate=45, text=legend] {
                65/ \footnotesize{Assemble composition system},
                6.6/ \footnotesize{Assemble temperature system},
                4.8/ \footnotesize{Solve Stokes system},
                3.9/ \footnotesize{Solve composition reactions},
                19.7/ \footnotesize{Other}
            }
        \end{tikzpicture}
        \caption{A breakdown of the runtime for the material model plugin.}
        \label{fig:perf_2pp_pie}
    \end{subfigure}
    %
    \caption{
        A comparison of the breakdown of runtime spent in the different elements of ASPECT between the particle property and material model approaches to tracking the composition.
        In both cases the \texttt{simple.dat} data set for Perple\_X has been used and the analysis has been drawn from the closed box experiments.
        The actual runtime comparison between the two approaches is discussed in Section~\ref{sec:???}.
    }
    \label{fig:perf_pie}
\end{figure}

\subsubsection{Load balancing}
\begin{figure}
    \centering
    \input{figures/load_balancing/particle_property.pgf}
    \caption{Caption}
    \label{fig:load_balancing}
\end{figure}

\begin{figure}
    \centering
    \input{figures/load_balancing/material_model.pgf}
    \caption{Caption}
    \label{fig:load_balancing_material_model}
\end{figure}

\subsubsection{Scaling}

\begin{figure}
    \centering
    \input{figures/strong_scaling/particle_property.pgf}
    \caption{Caption}
    \label{fig:my_label}
\end{figure}

\begin{figure}
    \centering
    \input{figures/weak_scaling/particle_property.pgf}
    \caption{Caption}
    \label{fig:my_label}
\end{figure}

\begin{figure}
    \centering
    \input{figures/strong_scaling/material_model.pgf}
    \caption{Caption}
    \label{fig:my_label}
\end{figure}

\subsubsection{Cache usage}

\begin{figure}
    \centering
    \input{figures/cache_usage/particle_property.pgf}
    \caption{Caption}
    \label{fig:my_label}
\end{figure}

\begin{figure}
    \centering
    \input{figures/cache_usage/material_model.pgf}
    \caption{Caption}
    \label{fig:my_label}
\end{figure}
